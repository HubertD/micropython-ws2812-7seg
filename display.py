from neopixel import NeoPixel
from seg7 import Seg7


class Display:

    def __init__(self, pin):
        self.pin = pin
        self.np = NeoPixel(pin, 141)
        self.color = (0, 0, 0)
        self.number = 0

        self.digitA = Seg7(
            self.np,
            "\x23\x22\x21\x20\x1F\x1E\x10\x0F\x0E\x0D\x0C",
            "\x15\x16\x17\x18\x19\x3E\x3F\x40\x41\x42",
            "\x30\x31\x32\x33\x34\x35\x36\x37\x38\x39",
            "\x24\x25\x26\x27\x28\x29\x11\x12\x13\x14",
            "\x0B\x0A\x09\x08\x07\x06\x1D\x1C\x1B\x1A",
            "\x2A\x2B\x2C\x2D\x2E\x2F\x3A\x3B\x3C\x3D",
            "\x00\x01\x02\x03\x04\x05\x43\x44\x45\x46"
        )
        self.digitB = Seg7(
            self.np,
            "\x60\x61\x62\x63\x64\x65\x66\x67\x68\x69",
            "\x57\x58\x59\x5A\x5B\x84\x85\x86\x87",
            "\x76\x77\x78\x79\x7A\x7B\x7C\x7D\x7E\x7F",
            "\x6A\x6B\x6C\x6D\x6E\x6F\x5C\x5D\x5E\x5F",
            "\x53\x54\x55\x56\x4D\x4E\x4F\x50\x51\x52",
            "\x70\x71\x72\x73\x74\x75\x80\x81\x82\x83",
            "\x47\x48\x49\x4A\x4B\x4C\x88\x89\x8A\x8B"
        )

    def set(self, number, color):
        self.digitA.set(number % 10, color)
        self.digitB.set(int(number/10) % 10, color)
        self.np.write()
